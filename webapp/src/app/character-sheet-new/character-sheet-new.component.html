<div id="character-sheet">
  <div id="character-main-image">
    <img src="/assets/img/missing-dnd-character.png"/>

    <div class="character-main-image-stat character-main-image-stat-left">
      <label class="character-main-image-hp">
        <span (click)="onFocusHp(true)" *ngIf="!displayVariables.hpIsToggled">HP: <!--{{character.getCurrentHp()}}/-->{{character.maxHp}}</span>
        <div *ngIf="displayVariables.hpIsToggled">
          <input #inputCharacterMaxHp type='number' (blur)="onFocusHp(false)" [value]="character.maxHp" appAutoFocus/>
          <button (click)="onFocusHp(false, inputCharacterMaxHp.value)">Submit</button>
        </div>
      </label>
      <label class="character-main-image-character-level">
        <span (click)="onFocusLevel(true)" *ngIf="!displayVariables.levelIsToggled">Char Lvl: {{character.level}}</span>
        <div *ngIf="displayVariables.levelIsToggled">
          <input #inputCharacterLevel type='number' (blur)="onFocusLevel(false)" [value]="character.level" appAutoFocus/>
          <button (click)="onFocusLevel(false, inputCharacterLevel.value)">Submit</button>
        </div>
      </label>
      <label class="character-main-image-xp">
        <span (click)="onFocusXp(true)" *ngIf="!displayVariables.xpIsToggled" >XP: {{character.experiencePoints}}</span>
        <div *ngIf="displayVariables.xpIsToggled">
          <input #inputCharacterXp type='number' (blur)="onFocusXp(false)" [value]="character.experiencePoints" appAutoFocus/>
          <button (click)="onFocusXp(false, inputCharacterXp.value)">Submit</button>
        </div>
      </label>
      <label class="character-main-image-speed">
        <span (click)="onFocusSpeed(true)" *ngIf="!displayVariables.speedIsToggled" >Speed: {{ character.speed }}ft</span>
        <div *ngIf="displayVariables.speedIsToggled">
          <input #inputCharacterSpeed type='number' (blur)="onFocusSpeed(false)" [value]="character.speed" appAutoFocus/>
          <button (click)="onFocusSpeed(false, inputCharacterSpeed.value)">Submit</button>
        </div>
      </label>
    </div>

    <label class="character-main-image-stat character-main-image-name">
      <span (click)="onFocusName(true)" *ngIf="!displayVariables.nameIsToggled" >{{ character.name == '' ? 'Character Name' : character.name}}</span>
<!--      <div *ngIf="displayVariables.nameIsToggled" >-->
      <div *ngIf="displayVariables.nameIsToggled" >
        <input #inputCharacterName type='text' (blur)="onFocusName(false)" [value]="character.name" appAutoFocus />
        <button (click)="onFocusName(false, inputCharacterName.value)">Submit</button>
      </div>
    </label>

    <label class="character-main-image-stat character-main-image-classes">{{ character.class == '' ? 'Character Classes' : character.class}}</label>
  </div>

  <div class="main-character-stats">
    <div class="main-character-stats-row">
      <div class="main-character-stat">
        <label class="stat-score">
          <span *ngIf="!displayVariables.acIsToggled" (click)="onFocusAc(true)">{{character.ac}}</span>
          <div *ngIf="displayVariables.acIsToggled" >
            <input #inputCharacterAc type='number' [value]="character.ac" (blur)="onFocusAc(false)" appAutoFocus />
            <button (click)="onFocusAc(false, inputCharacterAc.value)">Submit</button>
          </div>
        </label><br>
        <label class="stat-info">AC</label>
      </div>

      <div class="main-character-stat">
        <label class="stat-score">
          <span *ngIf="!displayVariables.touchAcIsToggled" (click)="onFocusTouch(true)">{{character.touchAc}}</span>
          <div *ngIf="displayVariables.touchAcIsToggled" >
            <input #inputCharacterTouchAc type='number' [value]="character.touchAc" (blur)="onFocusTouch(false)" appAutoFocus />
            <button (click)="onFocusTouch(false, inputCharacterTouchAc.value)">Submit</button>
          </div>
        </label><br>
        <label class="stat-info">Touch</label>
      </div>

      <div class="main-character-stat">
        <label class="stat-score">
          <span *ngIf="!displayVariables.flatFootedAcIsToggled" (click)="onFocusFlatFooted(true)">{{character.flatFootedAc}}</span>
          <div *ngIf="displayVariables.flatFootedAcIsToggled" >
            <input #inputCharacterFlatFootedAc type='number' [value]="character.flatFootedAc" (blur)="onFocusFlatFooted(false)" appAutoFocus />
            <button (click)="onFocusFlatFooted(false, inputCharacterFlatFootedAc.value)">Submit</button>
          </div>
        </label><br>
        <label class="stat-info">Flat-Footed</label>
      </div>

      <div class="main-character-stat">
        <label class="stat-score">
          <span *ngIf="!displayVariables.initiativeToggled" (click)="onFocusInitiative(true)">{{character.initiative}}</span>
          <div *ngIf="displayVariables.initiativeToggled" >
            <input #inputCharacterInitiative type='number' [value]="character.initiative" (blur)="onFocusInitiative(false)" appAutoFocus />
            <button (click)="onFocusInitiative(false, inputCharacterInitiative.value)">Submit</button>
          </div>
        </label><br>
        <label class="stat-info">Initiative</label>
      </div>
    </div>

    <div class="main-character-stats-row">
      <div class="main-character-stat">
        <label class="stat-score">+3</label><br>
        <label class="stat-info">Base Attack Bonus</label>
      </div>

      <div class="main-character-stat">
        <label class="stat-score">+5</label><br>
        <label class="stat-info">Grapple</label>
      </div>

      <div class="main-character-stat">
        <label class="stat-score">3</label><br>
        <label class="stat-info">Spell Resistance</label>
      </div>

      <div class="main-character-stat">
        <label class="stat-score">-2</label><br>
        <label class="stat-info">Damage Reduction</label>
      </div>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showDescription=!showDescription">Description &#8628;</button>

    <div *ngIf="showDescription;" class="main-character-description-inner hidden dropdown-stat" appScrollTo>
      <table>
        <tr>
          <td>Race:</td>
          <td><input #raceInput (blur)="onChangeRace(raceInput.value)" [value]="character.race" type="text"/></td>
        </tr>
        <tr>
          <td>Alignment:</td>
          <td><select  #alignmentInput (blur)="onChangeAlignment(alignmentInput.value)" >
            <option *ngFor="let option of alignmentOptions" [value]="option" [attr.selected]="this.character.alignment.toString() == option ? true: null">{{ option }}</option>
          </select></td>
        </tr>
        <tr>
          <td>Deity:</td>
          <td><input #deityInput (blur)="onChangeDeity(deityInput.value)" [value]="character.deity" type="text"/></td>
        </tr>
        <tr>
          <td>Size:</td>
<!--          <td><input #sizeInput (blur)="onChangeSize(sizeInput.value)" [value]="character.size" type="text"/></td>-->
          <td><select  #sizeInput (blur)="onChangeSize(sizeInput.value)" >
            <option *ngFor="let option of sizeOptions" [value]="option" [attr.selected]="this.character.size.toString() == option ? true: null">{{ option }}</option>
          </select></td>
        </tr>
        <tr>
          <td>Age:</td>
          <td><input #ageInput (blur)="onChangeAge(ageInput.value)" [value]="character.age" type="text"/></td>
        </tr>
        <tr>
          <td>Gender:</td>
          <td><input #genderInput (blur)="onChangeGender(genderInput.value)" [value]="character.gender" type="text"/></td>
        </tr>
        <tr>
          <td>Height:</td>
          <td><input #heightInput (blur)="onChangeHeight(heightInput.value)" [value]="character.height" type="number"/></td>
        </tr>
        <tr>
          <td>Weight:</td>
          <td><input #weightInput (blur)="onChangeWeight(weightInput.value)" [value]="character.weight" type="number"/></td>
        </tr>
        <tr>
          <td>Eyes:</td>
          <td><input #eyesInput (blur)="onChangeEyes(eyesInput.value)" [value]="character.eyes" type="text"/></td>
        </tr>
        <tr>
          <td>Hair:</td>
          <td><input #hairInput (blur)="onChangeHair(hairInput.value)" [value]="character.hair" type="text"/></td>
        </tr>
        <tr>
          <td>Skin:</td>
          <td><input #skinInput (blur)="onChangeSkin(skinInput.value)" [value]="character.skin" type="text"/></td>
        </tr>
        <tr>
          <td>Other:</td>
          <td><textarea></textarea></td>
        </tr>
        <tr>
          <td>Backstory:</td>
          <td><textarea></textarea></td>
        </tr>
      </table>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showAttacks=!showAttacks">Attacks &#8628;</button>
    <div *ngIf="showAttacks" class="main-character-description-inner  hidden dropdown-stat" appScrollTo>
      <app-weapons [character]="character"></app-weapons>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showArmor=!showArmor">Armor &#8628;</button>
    <div *ngIf="showArmor" class="main-character-description-inner  hidden dropdown-stat" appScrollTo>
      <app-armor [character]="character"></app-armor>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showSpells=!showSpells">Spells &#8628;</button>
    <div *ngIf="showSpells" class="main-character-description-inner  hidden dropdown-stat" appScrollTo>
      <app-spells [character]="character"></app-spells>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showSkills=!showSkills">Skills &#8628;</button>
    <div *ngIf="showSkills" class="main-character-description-inner  hidden dropdown-stat" appScrollTo>
      <app-skills [character]="character"></app-skills>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showInventory=!showInventory">Inventory &#8628;</button>
    <div *ngIf="showInventory" class="main-character-description-inner  hidden dropdown-stat" appScrollTo>
      <app-inventory [character]="character"></app-inventory>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showFeats=!showFeats">Feats &#8628;</button>
    <div *ngIf="showFeats" class="main-character-description-inner  hidden dropdown-stat" appScrollTo>
      <app-feats [character]="character"></app-feats>
    </div>
  </div>

  <div class="main-character-descriptor main-character-description">
    <button (click)="showSpecialAbilities=!showSpecialAbilities">Special Abilities &#8628;</button>
    <div *ngIf="showSpecialAbilities" class="main-character-description-inner  hidden dropdown-stat" appScrollTo>
      <app-special-abilities [character]="character"></app-special-abilities>
    </div>
  </div>
</div>
